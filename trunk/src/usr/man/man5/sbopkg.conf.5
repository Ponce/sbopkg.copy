.\"=====================================================================
.TH SBOPKG.CONF 5 "May 2010" sbopkg-SVN ""
.\"=====================================================================
.SH NAME
sbopkg.conf \- configuration file for sbopkg
.\"=====================================================================
.SH DESCRIPTION
The sbopkg.conf file contains configuration settings for
.BR sbopkg (8),
a tool for interacting with the SlackBuilds.org ("SBo") repository, a
collection of third-party SlackBuild scripts to build Slackware
packages.
A sample file is provided at /etc/sbopkg/sbopkg.conf.new.
Also, please see a note below about ARCH.
.PP
Boolean options are case-insensitive.
.PP
The different configuration options are:
.\"---------------------------------------------------------------------
.TP 3
.B REPO_NAME
This option allows the user to choose the repository to use.
The default options are SBo, SB64 and local.
The 'local' choice corresponds to a user-maintained repository whose
structure must be the same as the one used by SlackBuilds.org, in the
sense of a category/package/files hierarchy.
NOTE: all of the REPO_* variables are affected by the repository files
maintained in /etc/sbopkg/repos.d.
Please see the README-repos.d document in the sbopkg /doc directory.
.IP
The default assignment is:
.IP
\fCREPO_NAME=${REPO_NAME:-SBo}\fP
.\"---------------------------------------------------------------------
.TP
.B REPO_BRANCH
This option allows the user to set the default active repository branch.
The current options are listed in the default repos.d/* files and can
also be listed by issuing 'sbopkg -V ?'.
.IP
The default assignment is:
.IP
\fCREPO_BRANCH=${REPO_BRANCH:-13.1}\fP
.\"---------------------------------------------------------------------
.TP
.B REPO_ROOT
This option allows the user to set the location of the local mirrors of
the remote repositories.
Currently, the size of a local copy of the SBo repository is about 70MB.
.IP
The default assignment is:
.IP
\fCREPO_ROOT=${REPO_ROOT:-/var/lib/sbopkg}\fP
.\"---------------------------------------------------------------------
.TP
.B SRCDIR
This option contains the location of the cache directory where source
downloads will be saved.
.IP
The default assignment is:
.IP
\fCSRCDIR=${SRCDIR:-/var/cache/sbopkg}\fP
.\"---------------------------------------------------------------------
.TP
.B SBOPKGTMP
This option sets the default directory where certain working files are
saved on a temporary basis.
.IP
The default assignment is:
.IP
\fCSBOPKGTMP=${SBOPKGTMP:-/tmp/sbopkg}\fP
.\"---------------------------------------------------------------------
.TP
.B TMP
This option sets the default directory where built packages should be
stored.
TMP must be exported as it is used by the SlackBuilds.
Note that the default value of TMP is the same as in the SBo SlackBuild
scripts.
.IP
Also note that if the CLEANUP variable is set to YES, any custom TMP
setting is ignored.
.IP
The default assignment is:
.IP
\fCexport TMP=${TMP:-/tmp/SBo}\fP
.\"---------------------------------------------------------------------
.TP
.B OUTPUT
This option sets the default directory where compiled packages are
saved.
OUTPUT must be exported as it is also used by the SBo SlackBuilds.
Also note that the default value of OUTPUT is therefore the same as in
the SBo SlackBuilds.
.IP
The default assignment is:
.IP
\fCexport OUTPUT=${OUTPUT:-/tmp}\fP
.\"---------------------------------------------------------------------
.TP
.B QUEUEDIR
This option defines the directory under which saved queue files will be
kept.
.IP
The default assignment is:
.IP
\fCQUEUEDIR=${QUEUEDIR:-/var/lib/sbopkg/queues}\fP
.\"---------------------------------------------------------------------
.TP
.B KEEPLOG
This option should be set to YES or NO.
This option allows the user to choose whether to keep a permanent log of
packages that are built with sbopkg in order to go back and review the
build, and any errors, after exiting sbopkg.
If set to YES, this permanent log is saved at $LOGDIR/sbopkg-build-log.
.IP
The default assignment is:
.IP
\fCKEEPLOG=YES\fP
.\"---------------------------------------------------------------------
.TP
.B LOGDIR
This option sets the location for the sbopkg permanent log if KEEPLOG is
set to YES.
.IP
The default assignment is:
.IP
\fCLOGDIR=${LOGDIR:-/var/log/sbopkg}\fP
.\"---------------------------------------------------------------------
.TP
.B CLEANUP
This option should be set to YES or NO.
When set to YES, the unpacked source files and package tree in $TMP are
deleted right after the build, though the downloaded source archive and
completed package are left in $SRCDIR and $OUTPUT.
.IP
A side effect of setting CLEANUP to YES is that TMP is set to an
internal value and any other TMP setting is ignored.
.IP
The default assignment is:
.IP
\fCCLEANUP=NO\fP
.\"---------------------------------------------------------------------
.TP
.B ALLOW_MULTI
This option should be set to YES or NO.
When set to YES, this option allows the user to run multiple instances
of sbopkg.
.IP
Please understand that this option is provided for convenience, but
given the number of potential issues you can face when enabling this
(and we aren't going to try to work around users doing silly things),
you should consider working with ALLOW_MULTI=YES as an EXPERIMENTAL
UNSUPPORTED feature.
If you encounter problems, please try to make sure these aren't caused
by yourself doing improper things.
.IP
For reference, these are some of the things you shouldn't do with this
option enabled:
.RS 5
.TP 3
\(bu
run an ALLOW_MULTI=NO instance together with one or more having
ALLOW_MULTI=YES
.TP
\(bu
sync a repository when another instance is using it
.TP
\(bu
change the branch of a git repository when another instance is using it
(you can do this with rsync -- i.e., SlackBuild.org -- repos)
.TP
\(bu
simultaneously build or install the same package from different
instances
.TP
\(bu
save a queue file while using it from another instance
.RE
.IP
There can be more unsafe situations we haven't thought about.
Take care.
.IP
The default assignment is:
.IP
\fCALLOW_MULTI=NO\fP
.\"---------------------------------------------------------------------
.TP
.B DEBUG
This option should be set to 0, 1, or 2.
DEBUG sets the default debugging level for the update list feature of
sbopkg.
When DEBUG is set to 0, then only potential updated (or downgraded)
packages are listed.
When DEBUG is set to 1, then potential updates plus packages not in the
repo and packages that are newer than the repo are listed.
When DEBUG is set to 2, all non-updated packages are also listed.
Changing DEBUG to 1 or 2 may be helpful if it appears the updatelist
might be missing an update.
.IP
The default assignment is:
.IP
\fCDEBUG=0\fP
.\"---------------------------------------------------------------------
.TP
.B MKDIR_PROMPT
This option may be set to YES or NO.
When set to YES, sbopkg will prompt for confirmation before changing the
filesystem by creating its directories.
If you do not wish to be prompted (for instance, if you have some of the
directories on a temporary filesystem and don't wish to be prompted for
confirmation each time the filesystem is reinitialized) you can set this
to NO.
.IP
The default assignment is:
.IP
\fCMKDIR_PROMPT=YES\fP
.\"---------------------------------------------------------------------
.TP
.B RSYNCFLAGS
Rsync is used by sbopkg to mirror the SlackBuilds.org repository.
This option allows the user to manually tweak the rsync flags (options)
that are used by sbopkg.
Users are cautioned against making any changes to the default values
since new flags may or may not work.
Note: the rsync command in sbopkg already uses the --archive, --delete,
--no-owner, and --exclude flags, so there is no need to add them to the
RSYNCFLAGS option.
Changing these default options is not recommended.
.IP
The default assignment is:
.IP
\fCRSYNCFLAGS="--verbose --timeout=10"\fP
.\"---------------------------------------------------------------------
.TP
.B WGETFLAGS
Wget is used by sbopkg to download the source files for package
building.
This option allows the user to manually tweak the wget flags (options)
that are used by sbopkg.
Users are cautioned against making any changes to the default values
since new flags may or may not work.
Note: the wget command in sbopkg already uses the -O flag, so there is
no need to add that to the WGETFLAGS option.
Changing these default options is not recommended.
.IP
The default assignment is:
.IP
\fCWGETFLAGS="--continue --progress=bar:force --timeout=15 --tries=5"\fP
.\"---------------------------------------------------------------------
.TP
.B DIFF
This option allows the user to set which diff program to use when sbopkg
displays differences between edited files.
.IP
The default assignment is:
.IP
\fCDIFF=${DIFF:-diff}\fP
.\"---------------------------------------------------------------------
.TP
.B DIFFOPTS
This option allows the user to set which options are used by the $DIFF
program when sbopkg displays differences between edited files.
.IP
The default assignment is:
.IP
\fCDIFFOPTS=${DIFFOPTS:--u}\fP
.\"=====================================================================
.SH NOTES
.\"---------------------------------------------------------------------
.SS Overriding Environmental Variables
It is possible to set or override environmental variables and pass them
to the SlackBuild scripts when they are built from within sbopkg.
This is already demonstrated in the following line in the sbopkg.conf
file:
.PP
export TMP=${TMP:-/tmp/SBo}
.PP
This sets TMP to /tmp/SBo for building SBo packages within sbopkg (which
is currently the default for SBo SlackBuilds already).
Since this variable is exported, it could be changed for both sbopkg and
for building SBo packages within sbopkg.
For example, changing this line so it reads:
.PP
export TMP=${TMP:-/home/sbo/tmp}
.PP
would then set TMP to /home/sbo/tmp for building SBo packages.
OUTPUT can also be changed to save compiled packages in a location other
than the default of /tmp.
.PP
You can also export variables in sbopkg.conf that are not used by sbopkg
at all.
.\"---------------------------------------------------------------------
.SS About the ARCH Variable
You may be wondering why ARCH is not a configuration setting in the
default sbopkg.conf file.
The reason is that it does not have to be.
If ARCH is not set, sbopkg does some checking (using 'uname -m') to
determine what the system's architecture is.
If the architecture is x86, x86_64, or arm*, then sbopkg automatically
sets ARCH to i486, x86_64, or arm, respectively.
If ARCH is set, sbopkg will inherit that setting.
This means the user can add, for example, 'export ARCH=i686' in their
\&.bashrc or similar file, or the user can also execute something in the
root terminal like 'export ARCH=i686 && sbopkg'.
The user can also manually add it to their sbopkg.conf file if they
wish.
Finally, if ARCH is not set by the user and sbopkg does not detect one
of the previously mentioned architectures, then ARCH will be set by
whatever is in the SlackBuild scripts.
Note that the SlackBuild may, in certain instances, discard or override
previous ARCH settings if this is required for the build.
.\"=====================================================================
.SH FILES
.TP 3
.I /etc/sbopkg/sbopkg.conf
File to specify configuration options.
.TP
.I /etc/sbopkg/renames.d/50-default
Default file that lists software in SBo repository that has been
renamed.
See the README-renames.d document in the sbopkg doc/ directory for more
information.
.TP
.I /etc/sbopkg/repos.d/{40-sbo.repo,50-sb64.repo,60-local.repo}
Three default files for various types of sbopkg repositories.
See the README-repos.d document in the sbopkg doc/ directory for more
information.
.\"=====================================================================
.\" Make the release process handle a DOCDIR here? But the files from
.\" the official tarball go here.
.SH SEE ALSO
.BR diff (1),
.BR rsync (1),
.BR sbopkg (8),
.BR uname (1),
.BR wget (1),
.IR /usr/doc/sbopkg-SVN/*
.\" vim:set tw=72:
